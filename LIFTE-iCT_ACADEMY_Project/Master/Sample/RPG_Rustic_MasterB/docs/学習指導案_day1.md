# 学習指導案（初日）RPG_Rustic_MasterB／7人チーム用

## 0. 対象と前提
- 対象：中高生7名、各自ノートPC。  
- 前提：`Kivy`／`KivyMD` がインストール済み。Git操作（clone／pull／commit／push）が可能。  
- リポジトリ：`LIFTE-iCT_ACADEMY_Project/Master/Sample/RPG_Rustic_MasterB`（本班用にフォークまたはブランチ作成）

---

## 1. 本時のねらい（初日）
- ① プロジェクトがローカルで起動し、**タイトル→タウン→ダンジョン** へ画面遷移できる最小動作を完成させる。  
- ② 7人が役割を分担し、**小さな成果物**を各自1つ以上コミット・プッシュする。  
- ③ 次回以降に向けた**ファイル構成・命名規約・Git運用**の基礎を統一する。

**Definition of Done（本日の合格基準）**  
- アプリ起動でタイトル画面が表示され、ボタンまたはキー操作で**タウン**→**ダンジョン**へ遷移できる。  
- 画面上に**方向インジケータ（矢印UI）**か**現在地テキスト**が表示される。  
- `README_day1.md` に今日の実績（担当／変更点／スクリーンショット1枚）を追記済み。  
- main ブランチへ**PRを1本マージ**、タグ `day1_milestone` を付与。

---

## 2. 時間割（3時間想定／90分圧縮版も併記）
| 時間 | 目的 | 内容 |
|---|---|---|
| 0:00–0:10（0:00–0:05） | 全体整備 | 役割決定、ブランチ命名確認、板書共有、環境チェック |
| 0:10–0:30（0:05–0:15） | 構成統一 | フォルダ構成・命名規約確定、空ファイル雛形配置 |
| 0:30–1:40（0:15–0:55） | 個別実装 | 7役割で並行作業（下記「3. 役割別タスク」） |
| 1:40–2:10（0:55–1:10） | 結合 | 画面遷移の配線、依存の解消、最小動作確認 |
| 2:10–2:35（1:10–1:20） | 動作保証 | 互いのPCで起動テスト、バグ一次修正 |
| 2:35–2:50（1:20–1:25） | 仕上げ | README_day1更新、スクショ撮影、PR作成 |
| 2:50–3:00（1:25–1:30） | 共有 | 全体デモ、タグ付け、次回タスク確認 |

※括弧内は90分圧縮版。

---

## 3. 役割分担と初日タスク詳細（7人）
> ブランチ命名：`day1/<role>-<name>`（例：`day1/ui-sato`）。コミットは小刻みに。  

### ① リーダー／統合（Scrum Master）
- 作業：進行管理、板書の更新、PRレビューとマージ。  
- 成果物：`README_day1.md` ひな形、作業の定義とチェックリスト。  
- チェック：全員のブランチ作成・最小コミットを確認、結合タイムのアナウンス。

### ② 画面遷移＆骨組み（ScreenManager）
- 作業：`main.py` に `ScreenManager` を用意し `TitleScreen`／`TownScreen`／`DungeonScreen` を登録。  
- 成果物：各画面のプレースホルダ（ラベルやボタン1個で可）。  
- チェック：ボタン（またはキー）で **Title→Town→Dungeon** に遷移。

### ③ UI／テーマ（KivyMD, 方位インジケータ）
- 作業：`ui/theme.py` の作成（テーマ色／フォントサイズ基準）。方向インジケータ（↑↓←→）を `widgets/compass.py` に実装。  
- 成果物：方位UIを各画面左上に設置（ダミーで良い）。  
- チェック：画面遷移してもUIが崩れない。

### ④ 入力／プレイヤー制御（Keyboard/Touch）
- 作業：キー入力（WASD／矢印）を `input/controller.py` に実装し、現在地テキストを更新。  
- 成果物：キー押下で `player_state.json`（仮）に方角・座標を記録。  
- チェック：押下に応じて表示が変化。

### ⑤ マップ／ダンジョン下地（Etrian風の雰囲気）
- 作業：`maps/` に `dungeon_01.json`（10×10程度の簡易マップ）を作成し、壁と通路を描画する下地を `screens/dungeon.py` に用意。  
- 成果物：通行可能タイル上のみ移動（衝突は未実装でも可、色分けで視覚化）。  
- チェック：現在地が通路内で更新される。

### ⑥ アセット管理（画像／音／ライセンス）
- 作業：`assets/images/` と `assets/sounds/` を整理。プレースホルダ素材を配置し、`ASSETS.md` に出典とライセンスを明記。  
- 成果物：タイトル背景1枚、効果音1つ（ダミー可）。  
- チェック：パスのハードコード回避（`assets.get_path()` のユーティリティ導入）。

### ⑦ QA／ビルド＆ドキュメント
- 作業：`tests/smoke_test.md` に手動テスト手順（起動→遷移→UI表示）を記述。起動時のログ収集方法を明記。  
- 成果物：不具合があればIssue起票（タイトル「[Day1] …」）。  
- チェック：別PCでの再現確認、READMEのスクリーンショット撮影。

---

## 4. フォルダ構成（初日版）
```
project_root/
  main.py
  screens/
    title.py
    town.py
    dungeon.py
  ui/
    theme.py
    widgets/
      compass.py
  input/
    controller.py
  maps/
    dungeon_01.json
  assets/
    images/
    sounds/
    ASSETS.md
  docs/
    README_day1.md
  tests/
    smoke_test.md
```

---

## 5. 作業手順（共通）
1. リポジトリを最新化：`git pull`  
2. 各自ブランチ作成：`git switch -c day1/<role>-<name>`  
3. 15–20分ごとに小さくコミット：`feat: add TitleScreen placeholder` など  
4. 依存がありそうなら早めにリーダーへ共有（板書に反映）  
5. 結合タイムに `ScreenManager` へ配線→起動確認  
6. PR作成→レビュー→マージ→`tag: day1_milestone`

---

## 6. 命名規約（初日）
- ファイル：`snake_case.py`、クラス：`PascalCase`、関数／変数：`snake_case`  
- 画像：`img_<用途>_<番号>.png`、音：`se_<用途>_<番号>.wav`  
- コミットメッセージ：`feat|fix|docs|chore: 短い説明`

---

## 7. 板書案（開始・中盤・終了）
**開始（0:00）**  
- 目的：タイトル→タウン→ダンジョン最小動作／全員1コミット  
- ブランチ命名：`day1/<role>-<name>`  
- 役割割当：①リーダー ②画面 ③UI ④入力 ⑤マップ ⑥アセット ⑦QA

**中盤（1:40）**  
- 結合：`ScreenManager` 配線／現在地表示／方位UI表示  
- テスト順：起動→遷移→表示→入力→マップの順

**終了（2:50）**  
- PRマージ／タグ `day1_milestone`  
- README更新（担当・変更点・スクショ）  
- 次回ToDo：戦闘枠、当たり判定、UI改良

---

## 8. リスク対策（詰まり時の代替）
- 画面遷移で詰まり：ボタンではなく一時的に**自動遷移**で確認。  
- マップ描画で詰まり：`Label` でテキストマップ表示に切替。  
- 入力で詰まり：`Clock.schedule_interval` で擬似入力（デモ用）。  
- 依存衝突：各自の変更点を板書へ列挙→先に土台（②③）を優先反映。

---

## 9. 評価観点（初日）
- 共同作業：ブランチ運用・小刻みコミット・PRの質  
- 完成度：DoD達成、別PCでの起動再現  
- ドキュメント：`README_day1.md` の簡潔さと正確さ

---

## 10. 付録：配布・実行ガイド（生徒向け）
```
# 1) リポジトリ最新化
git pull

# 2) 自分のブランチ作成（例）
git switch -c day1/ui-sato

# 3) 実行（例）
python main.py

# 4) 15〜20分ごとに小さくコミット
git add -A
git commit -m "feat: add compass widget placeholder"
git push -u origin HEAD

# 5) PR作成 → レビュー → マージ
```
---

## 11. PM用チェックリスト（授業をせずに回す）
- [ ] 役割割当とブランチ命名を確認  
- [ ] 板書の「依存関係」欄を常時更新  
- [ ] 結合タイムを時間通り開始（遷移→UI→入力→マップの順）  
- [ ] PRの内容を確認し、コンフリクト時は当事者2名を招集  
- [ ] DoDの4条件を満たしたかをデモで確認  
- [ ] `day1_milestone` タグ付与と README スクリーンショット反映

---

## 12. 次回への引き継ぎ（提案）
- 当たり判定とカメラ追従（⑤主導）  
- フィールドUI調整（③）  
- 入力抽象化と設定メニュー（④）  
- 戦闘シーンの雛形とダミーAI（新：⑧に増員可）  
- アセット権利表の整備（⑥継続）／スモークテスト自動化の検討（⑦）
