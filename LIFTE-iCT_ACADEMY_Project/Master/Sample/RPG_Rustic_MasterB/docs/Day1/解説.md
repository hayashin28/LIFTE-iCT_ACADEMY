# 解説（Day1 模範解答）

ここでは、段階課題に対応する実装の「考え方」をまとめます。

## STEP01 Title
- `TitleScreen` のボタン `on_release=self.go_town` → `self.manager.current="town"`。  
- 戻ってきても描画が崩れないよう、`on_pre_enter` でUIを構築。

## STEP02 Town
- 同様に `go_dungeon` で `"dungeon"` へ。文脈上の「導線」を最短で。

## STEP03 Compass
- `Compass` は `direction` を `StringProperty` 化。`bind(direction=...)` でUI更新。  
- 表現は文字（↑→↓←）で十分。将来は画像に置換可能。

## STEP04 Move
- `Window.request_keyboard` → `on_key_down`。`up/left/down/right` と `w/a/s/d` を同義に扱う。  
- まずは **範囲チェック** だけ通し、壁衝突は任意（今回の模範ではONにできます）。

## STEP05 Map
- `maps/dungeon_01.json` を読み込み、`1=壁, 0=床` としてテキストで描画。  
- 学習効果のため、**可読性優先**の実装にしています（最適化は次回以降）。

---

### つまずき対策
- キーボードが効かない：ウィンドウを一度クリック／エディタのフォーカスを外す。  
- 文字化け：エディタのUTF-8設定を確認。Windowsは等幅フォントで表示。  
- 黒画面：`on_pre_enter` で `add_widget` が呼ばれているかを確認。

### 余力課題
- マップ境界外の移動ログを出す（無効入力の可視化）。  
- `Compass` を画像ベースに差し替え。  
- `input/controller.py` に入力抽象化を切り出す（任意）。
